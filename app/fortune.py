import random
from linebot.models import FlexSendMessage, BubbleContainer, BoxComponent, TextComponent, ImageComponent

FORTUNES = ["大吉", "吉", "中吉", "小吉", "末吉", "凶"]

FORTUNES_IMAGES = {
    "大吉": "https://storage.googleapis.com/sitconimg/img/%E5%A4%A7%E5%90%89.png",
    "吉": "https://storage.googleapis.com/sitconimg/img/%E5%90%89.png",
    "中吉": "https://storage.googleapis.com/sitconimg/img/%E4%B8%AD%E5%90%89.png",
    "小吉": "https://storage.googleapis.com/sitconimg/img/%E5%B0%8F%E5%90%89.png",
    "末吉": "https://storage.googleapis.com/sitconimg/img/%E6%9C%AB%E5%90%89.png",
    "凶": "https://storage.googleapis.com/sitconimg/img/%E5%87%B6.png"
}

FORTUNE_MESSAGES = {
    "大吉": [
        "今天你就是幸運女神的寵兒！別擔心錯過什麼，最精彩的都在你身邊。\n\n今日宜：試著關掉關掉手機通知，專注享受眼前的美好時光。"
        "今天會是美好的一天！充滿希望和機遇。\n\n今日宜：出門散步，感受身邊的美好。",
        "你的努力將得到回報，繼續保持積極的態度。\n\n今日宜：制定一個小目標並付諸行動。",
        "好運將伴隨著你，勇敢地追逐你的夢想吧！\n\n今日宜：列一個 '想做但一直沒做' 的願望清單，選一件來完成。",
        "今天的你魅力四射，連路邊的小花都為你綻放。\n\n今日宜：拍張美照記錄美好時刻。",
        "財神爺今天特別眷顧你，對自己好一點吧！\n\n今日宜：請自己吃頓豐盛的午餐。",
        "今天的你就像超級英雄，沒有什麼難題能難倒你。\n\n今日宜：幫助他人。",
        "好運來敲門，別宅在家裡錯過了！\n\n今日宜：出門運動，呼吸新鮮空氣。",
        "你的魅力值爆表，連路人都忍不住多看你兩眼。\n\n今日宜：嘗試一個新髮型或穿搭。",
        "今天的你腦袋特別靈光，快去解決那個困擾已久的難題吧！\n\n今日宜：學習一項新技能。"
    ],
    "吉": [
        "好運在向你招手，放下手機，感受生活的美好。\n\n今日宜：和家人朋友來場面對面的深度交流吧！"
        "今天的你像杯溫熱的奶茶，舒心愜意。\n\n今日宜：寫下三件值得感恩的事，珍惜自己所擁有的。"
        "今天運氣不錯，保持樂觀的心態。\n\n今日宜：畫一幅簡單的畫或寫一首小詩。",
        "小確幸即將降臨，睜大眼睛別錯過了。\n\n今日宜：品嚐一種新的美食。",
        "適合嘗試新事物，或許會有意想不到的收穫。\n\n今日宜：嘗試一件平常不敢做的事。",
        "今天的運氣不錯,別忘了分享快樂給身邊的人喔。\n\n今日宜:送朋友一個小驚喜。",
        "今天的你特別有魅力，不妨多與人互動。\n\n今日宜：和一位久未聯絡的朋友通話。",
        "你的努力即將開花結果，再堅持一下下吧！\n\n今日宜：為自己訂立一個小目標。",
        "今天的你充滿正能量，散播歡樂給周圍的人吧！\n\n今日宜：跟你愛的人說聲'我愛你'。",
        "小小的驚喜正在路上，保持期待的心情喔！\n\n今日宜：整理房間，為好運騰出空間。"
    ],
    "中吉": [
	    "享受屬於自己的節奏，無需隨波逐流。\n\n今日宜：嘗試一天不看社交媒體，專注於自己的愛好。"
        "平穩的一天，正好放鬆心情。\n\n今日宜：做15分鐘冥想或深呼吸練習。",
        "保持平和的心態，不要輕易被外界干擾。\n\n今日宜：進行一次數位斷捨離，刪除不需要的 APP。",
        "今天適合充實自己，不如學點新東西吧！\n\n今日宜：觀看一部紀錄片或閱讀一篇文章。",
        "運氣還不錯，努力一下下說不定有意外驚喜喔！\n\n今日宜：完成一項拖延已久的任務。",
        "今天雖無大事，但也暗藏機遇。\n\n今日宜：整理手機相簿，回顧美好回憶。",
        "平凡中也有精彩，享受生活中的小確幸吧！\n\n今日宜：準備一頓豐盛的晚餐。",
        "平靜的日子裡藏著驚喜，別錯過了。\n\n今日宜：整理衣櫃，淘汰舊物。",
        "今天的你特別有耐心，適合完成需要專注的工作。\n\n今日宜：解決一個懸而未決的問題。",
        "今天就像一杯溫和的綠茶，平靜中帶著一絲甘甜。\n\n今日宜：做一個簡單的手工藝，如摺紙或編織。"
    ],
    "小吉": [
        "今天運氣平平，但努力就會有收穫。\n\n今日宜：列一份待辦事項清單並完成其中之一。",
        "可能會有些小麻煩，但別擔心，都能克服。\n\n今日宜：給自己一個小獎勵。",
        "小小的好運在身邊，別忽視了生活中的小確幸。\n\n今日宜：欣賞戶外的風景。",
        "今天適合充實自己，不如學點新東西？\n\n今日宜：嘗試一個簡單的新食譜。",
        "平靜的一天，正好放鬆心情。\n\n今日宜：聽一首喜歡的歌曲並跟著哼唱。",
        "今天雖無大事，但也暗藏機遇。\n\n今日宜：整理書櫃,重溫舊書。",
        "今天適合自我反思，不如好好規劃未來？\n\n今日宜：寫下三個月內想實現的目標。",
        "心態決定一切，保持微笑吧！\n\n今日宜：照鏡子對自己說三句鼓勵的話。",
        "生活就像調味料，今天可能只是淡淡的，但也別忘了欣賞其中的滋味。\n\n今日宜：試試用不同的香料烹飪一道菜。",
        "今天如同微風輕撫，舒適宜人。\n\n今日宜：找一個舒適的地方，靜靜地閱讀30分鐘。"
    ],
    "末吉": [
	    "今天的你如同多雲的天氣，記住，別人的生活也不總是陽光普照。\n\n今日宜：練習正念冥想，活在當下。"
        "今天可能會遇到一些困難，保持冷靜和耐心。\n\n今日宜：寫下三件讓你感到幸福的事。",
        "不要輕易做重要決定，多聽聽他人的意見。\n\n今日宜：泡個舒服的熱水澡。",
        "今天可能有點小挫折，但這正是成長的機會。\n\n今日宜：學習一個新技能。",
        "別忘了雲後還有陽光。\n\n今日宜：畫一幅畫，記錄此刻的心情。",
        "生活就像馬拉松,偶爾會遇到上坡,但別忘了欣賞沿途風景。\n\n今日宜：做一件善事。",
        "今天可能感覺平平無奇，但平凡中也蘊藏著機遇。\n\n今日宜：嘗試一種新的瑜伽姿勢。",
        "生活像是一本書，今天可能不是最精彩的一頁，但每一頁都是故事的一部分。\n\n今日宜：寫一篇短日記，記錄今天的所思所想。",
        "今天可能感覺有點乏力，但這正是充電的好時機。\n\n今日宜：早點休息，好好犒賞自己。",
        "生活如同調配雞尾酒，今天的味道可能不夠濃烈，但也別忘了品味其中的微妙。\n\n今日宜：嘗試一種新的飲料搭配。"
    ],
    "凶": [
        "今天運勢不佳，但別灰心，明天會更好。\n\n今日宜：整理相冊，回顧自己精彩的人生片段。",
        "小心謹慎為上，避免衝動的行為。\n\n今日宜：看一本自己喜歡的書。",
        "多關心身邊的人，他們的支持會給你力量。\n\n今日宜：和家人朋友來場面對面的深度交流吧！",
        "最黑暗的夜晚總會過去，黎明終會到來。\n\n今日宜：聽一首自己喜歡的歌曲。",
        "面對困難時，更要展現勇氣。你可以的！\n\n今日宜：嘗試一個小小的挑戰。",
        "今天可能感覺步履維艱,但請記住,這只是人生道路上的一小段。\n\n今日宜：整理環境，為好運掃清障礙。",
        "生活如同四季，現在可能是嚴冬，但春天總會到來。\n\n今日宜：規劃一次未來的小旅行，給自己一個期待。",
        "今天可能感覺如履薄冰，但這也是鍛煉平衡感的好機會。\n\n今日宜：進行15分鐘的平衡訓練，如單腳站立或瑜伽樹式。",
        "生活就像是拼圖，今天可能找不到合適的拼塊，但別忘了欣賞已完成的部分。\n\n今日宜：回顧相冊，重溫美好回憶。",
        "今天可能感覺舉步維艱，但請記住，這是讓自己變得更堅強的機會。\n\n今日宜：寫下三個最近克服的小困難，為自己喝采。"
    ]
}

def get_daily_fortune():
    fortune = random.choice(FORTUNES)
    message = random.choice(FORTUNE_MESSAGES[fortune])
    return fortune, message

def create_fortune_flex_message(fortune, message):
    bubble = BubbleContainer(
        body=BoxComponent(
            layout="vertical",
            contents=[
                ImageComponent(
                    url=FORTUNES_IMAGES[fortune],
                    size="full",
                    aspect_mode="cover",
                    aspect_ratio="20:13"
                ),
                TextComponent(
                    text=message,
                    size="lg",
                    wrap=True,
                    margin="md"
                )
            ]
        )
    )
    return FlexSendMessage(alt_text="今日運勢", contents=bubble)